<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>TmzLity - [Zh] Use hexadecimal string to draw sprites in AXE</title>

        <link href="../css/base.css" rel="stylesheet">
        <link href="../css/blog.css" rel="stylesheet">
        <link href="../css/syntax.css" rel="stylesheet" />
        <!--         mathJax -->
        <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <div id="header">
            <h1><a href="../">TmzLity</a></h1>
            <div id="nav">
                <a href="../">Home</a>
                <a href="../about.html">About</a>
                <a href="../archive.html">Archive</a>
                <a href="https://github.com/TxmszLou">Github</a>
            </div>
            <h2>Tags</h2>
            <div id="taglist">
                
                  <a href="../tags/Ti84-83.html">Ti84-83 (7)</a>
                
                  <a href="../tags/spare talk.html">spare talk (3)</a>
                
                  <a href="../tags/robot.html">robot (1)</a>
                
                  <a href="../tags/reading.html">reading (1)</a>
                
                  <a href="../tags/development.html">development (1)</a>
                
                  <a href="../tags/Tinspire.html">Tinspire (1)</a>
                
                  <a href="../tags/Ti84/83.html">Ti84/83 (1)</a>
                
                  <a href="../tags/PL.html">PL (1)</a>
                
                  <a href="../tags/Emacs.html">Emacs (1)</a>
                
                  <a href="../tags/Coq.html">Coq (1)</a>
                
                  <a href="../tags/Android.html">Android (1)</a>
                </ul></li>
            </div>
            <h2>Links</h2>
        </div>


        <div id="content">
    <h1>[Zh] Use hexadecimal string to draw sprites in AXE</h1>
<div class="info">
    Posted on January  7, 2014
    
</div>
<div class="info">
    
    Tags: <a href="../tags/Ti84-83.html">Ti84-83</a>
    
</div>

<p>作为一个游戏语言，画图在AXE中自然是不可或缺的！</p>
<p>AXE目前支持一次性画8X8的像素点</p>
<canvas id="FullSprite" width="80" height="80" style="border:2px solid #000000;">
Your browser does not support html5 canvas
</canvas>
<p>作图语言为16位的16进制</p>
<p>虽然AXE官方提供了一个小程序用于生成16进制代码</p>
<!--more-->
<p>但由于在计算器上运行地不稳定性</p>
<p>又出于对原理地探究(摔)</p>
<p>于是今天就来讲解一下如何手动方便地作图</p>
<h1 id="正文开始">正文开始</h1>
<p>8x8的“图片”由16位16进制数组成</p>
<p>由此可得每一位16进制数负责画4个像素点</p>
<p>假设16进制代码为：</p>
<p>[ABCDEFGHIJKLMNOP]</p>
<p>每位16进制数分别负责：</p>
<p>A: (1,8) ~ (4,8)</p>
<p>B: (5,8) ~ (8,8)</p>
<p>C: (1,7) ~ (4,7)</p>
<p>D: (5,7) ~ (8,7)</p>
<p>…</p>
<p>那么每位16进制数如何控制4个像素点呢？</p>
<p>点击box模拟像素，右侧会生成16进制代码</p>
<p>版权归GeekOTA所有，转载请注明出处</p>
<canvas id="myCanvas" width="500" height="100" style="border:2px solid #000000">
</canvas>
<script>
            function writeMessage(textCanvas, message){
                var textCtx = textCanvas.getContext('2d');
                textCtx.clearRect(400,0,textCanvas.width,textCanvas.height);
                textCtx.font = '18pt Calibri';
                textCtx.fillStyle='black';
                textCtx.fillText(message, 410, 25);
            }

            function getCode(){
                var test1 = (context.getImageData(50,50,1,1).data)[3];
                var test2 = (context.getImageData(150,50,1,1).data)[3];
                var test3 = (context.getImageData(250,50,1,1).data)[3];
                var test4 = (context.getImageData(350,50,1,1).data)[3];
                var finTest = parseInt(test1.toString()+test2.toString()+test3.toString()+test4.toString());
                var code = "0";
                console.log("test: "+ test1+test2+test3+test4+" finTest: "+finTest);
                
                
                switch (finTest)
                {
                    case 0:
                        code = "0";
                        break;
                    case 255:
                        code = "1";
                        break;
                    case 2550:
                        code = "2";
                        break;
                    case 255255:
                        code = "3";
                        break;
                    case 25500:
                        code = "4";
                        break;
                    case 2550255:
                        code = "5";
                        break;
                    case 2552550:
                        code = "6";
                        break;
                    case 255255255:
                        code = "7";
                        break;
                    case 255000:
                        code = "8";
                        break;
                    case 25500255:
                        code = "9";
                        break;
                    case 25502550:
                        code = "A";
                        break;
                    case 2550255255:
                        code = "B";
                        break;
                    case 25525500:
                        code = "C";
                        break;
                    case 2552550255:
                        code = "D";
                        break;
                    case 2552552550:
                        code = "E";
                        break;
                    case 255255255255:
                        code = "F";
                        break;
                    default:
                        code = "0";
                }

                console.log("Code: "+code);
                writeMessage(textCanvas, code);
            }

            function getMousePos(canvas, event){
                var rect = canvas.getBoundingClientRect();
                return {
                        x: event.clientX - rect.left,
                        y: event.clientY - rect.top
                       };
            }

            function doMouseDown(event){
                var x = event.pageX;
                var y = event.pageY;
                var loc = getMousePos(event.target, event);

                console.log("mouse down at point( x:" + loc.x + ", y:" + loc.y + ")"); 
                var colorTest = context.getImageData(loc.x, loc.y, 1, 1);
                var pixel = colorTest.data;
                console.log("colorTest: rgb: "+ pixel[0]+pixel[1]+pixel[2]+pixel[3]);

                var pos = Math.floor(loc.x / 100);

                if(pixel[3] == 255){
                    context.clearRect(pos*100+1, 0, 97, 100);
                }else{
                    context.fillStyle="#000000";
                    context.fillRect(pos*100+1 , 0, 97, 100);
                }

                getCode();

            }
                var canvas = document.getElementById('myCanvas');
                var textCanvas = document.getElementById('myCanvas');
                var context = canvas.getContext('2d');
                    for (var i=100; i<=400; i=i+100){
                        context.moveTo(i,0);
                        context.lineTo(i,100);
                        context.stroke();
                    }
                    canvas.addEventListener("mousedown", doMouseDown, false);
        </script>
<script>
var c = document.getElementById("FullSprite");
var ctx = c.getContext("2d");
for(var i = 10; i <= 80; i=i+10){
    ctx.moveTo(0,i);
    ctx.lineTo(80,i);
    ctx.strokeStyle="red"
    ctx.stroke();
}
for(var i = 10; i <= 80; i=i+10){
    ctx.moveTo(i,0);
    ctx.lineTo(i,80);
    ctx.stroke();
}

</script>


    <div id="disqus_thread"></div>
    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'tmzlity'; // required: replace example with your forum shortname
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

    <div id="footer">
        Site proudly generated by
        <a href="http://jaspervdj.be/hakyll">Hakyll</a>. </br>
        <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">TmzLity</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="https://github.com/TxmszLou" property="cc:attributionName" rel="cc:attributionURL">Sixuan Thomas Lou</a> is licensed under </br><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
        <br />
        <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a>
    </div>

</div>


    </body>
</html>
